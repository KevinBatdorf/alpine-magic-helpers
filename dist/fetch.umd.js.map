{"version":3,"file":"fetch.umd.js","sources":["../src/fetch.js","../src/utils.js"],"sourcesContent":["import axios from 'axios'\nimport { checkForAlpine } from './utils'\n\nconst AlpineFetchMagicMethod = {\n    start() {\n        checkForAlpine()\n\n        Alpine.addMagicProperty('fetch', function () {\n            return (...parameters) => {\n                if (typeof parameters[0] === 'string' && parameters[0].length) {\n                    return axios(parameters[0]).then(response => response.hasOwnProperty('data') ?  response.data : response)\n                }\n\n                if (typeof parameters[0] === 'object') {\n                    return axios(parameters[0])\n                }\n\n                return parameters[0]\n            }\n        })\n    }\n}\n\nconst alpine = window.deferLoadingAlpine || ((alpine) => alpine())\n\nwindow.deferLoadingAlpine = function (callback) {\n    AlpineFetchMagicMethod.start()\n\n    alpine(callback)\n}\n\nexport default AlpineFetchMagicMethod\n","export const checkForAlpine = () => {\n    if (! window.Alpine) {\n        throw new Error('[Magic Helpers] Alpine is required for the magic helpers to function correctly.')\n    }\n}\n\nexport const saferEval = (expression, dataContext, additionalHelperVariables = {}) => {\n    if (typeof expression === 'function') {\n        return expression.call(dataContext)\n    }\n\n    return (new Function(['$data', ...Object.keys(additionalHelperVariables)], `var __alpine_result; with($data) { __alpine_result = ${expression} }; return __alpine_result`))(\n        dataContext, ...Object.values(additionalHelperVariables)\n    )\n}\n"],"names":["AlpineFetchMagicMethod","start","window","Alpine","Error","checkForAlpine","addMagicProperty","parameters","length","axios","then","response","hasOwnProperty","data","alpine","deferLoadingAlpine","callback"],"mappings":"8RAGMA,EAAyB,CAC3BC,kBCJ0B,WAC1B,IAAMC,OAAOC,OACT,UAAUC,MAAM,mFDGhBC,GAEAF,OAAOG,iBAAiB,QAAS,WAC7B,sBAAWC,2BACP,MAA6B,iBAAlBA,EAAW,IAAmBA,EAAW,GAAGC,OAC5CC,EAAMF,EAAW,IAAIG,KAAK,SAAAC,UAAYA,EAASC,eAAe,QAAWD,EAASE,KAAOF,IAGvE,iBAAlBJ,EAAW,GACXE,EAAMF,EAAW,IAGrBA,EAAW,QAM5BO,EAASZ,OAAOa,oBAAuB,SAACD,UAAWA,YAEzDZ,OAAOa,mBAAqB,SAAUC,GAClChB,EAAuBC,QAEvBa,EAAOE"}
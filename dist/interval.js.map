{"version":3,"file":"interval.js","sources":["../src/utils.js","../src/interval.js"],"sourcesContent":["export const checkForAlpine = () => {\n    if (! window.Alpine) {\n        throw new Error('[Magic Helpers] Alpine is required for the magic helpers to function correctly.')\n    }\n}\n\nexport const saferEval = (expression, dataContext, additionalHelperVariables = {}) => {\n    if (typeof expression === 'function') {\n        return expression.call(dataContext)\n    }\n\n    return (new Function(['$data', ...Object.keys(additionalHelperVariables)], `var __alpine_result; with($data) { __alpine_result = ${expression} }; return __alpine_result`))(\n        dataContext, ...Object.values(additionalHelperVariables)\n    )\n}\n","import { checkForAlpine } from './utils'\n\nconst AlpineIntervalMagicMethod = {\n    start() {\n        checkForAlpine()\n\n        Alpine.addMagicProperty('interval', function () {\n            return function (...parameters) {\n                if (typeof parameters[0] !== 'function') return parameters[0]\n\n                let timer = parameters[1],\n                    delay = 0,\n                    forceInterval = false\n\n                // Users can pass in an object as a second parameter instead\n                if (typeof parameters[1] === 'object') {\n                    if (parameters[1].hasOwnProperty('timer')) {\n                        timer = parameters[1].timer\n                    }\n\n                    if (parameters[1].hasOwnProperty('delay')) {\n                        delay = parameters[1].delay\n                    }\n\n                    if (parameters[1].hasOwnProperty('forceInterval')) {\n                        forceInterval = parameters[1].forceInterval\n                    }\n                }\n\n                let loop = () => {\n                    const test = this.hasOwnProperty('autoIntervalTest') ? this.autoIntervalTest : true\n\n                    setTimeout(() => {\n                        if (!this.autoIntervalLoop) return\n                        test && parameters[0].call(this)\n                        forceInterval ? this.autoIntervalLoop() : requestAnimationFrame(this.autoIntervalLoop)\n                    }, timer)\n                }\n\n                this.autoIntervalLoop = loop\n\n                setTimeout(() => {\n                    if (!this.autoIntervalLoop) return\n\n                    forceInterval ? this.autoIntervalLoop() : requestAnimationFrame(this.autoIntervalLoop)\n                }, delay)\n\n                this.$watch('autoIntervalTest', test => {\n                    if (test) {\n                        this.autoIntervalLoop = loop\n\n                        forceInterval ? this.autoIntervalLoop() : requestAnimationFrame(this.autoIntervalLoop)\n                    } else {\n                        clearTimeout(this.autoIntervalLoop)\n\n                        this.autoIntervalLoop = null\n                    }\n                })\n            }\n        })\n    }\n}\n\nconst alpine = window.deferLoadingAlpine || ((alpine) => alpine())\n\nwindow.deferLoadingAlpine = function (callback) {\n    AlpineIntervalMagicMethod.start()\n\n    alpine(callback)\n}\n\nexport default AlpineIntervalMagicMethod\n"],"names":["AlpineIntervalMagicMethod","start","window","Alpine","Error","checkForAlpine","addMagicProperty","parameters","timer","delay","forceInterval","hasOwnProperty","loop","test","_this","autoIntervalTest","setTimeout","autoIntervalLoop","call","requestAnimationFrame","$watch","clearTimeout","alpine","deferLoadingAlpine","callback"],"mappings":"wOAAO,ICEDA,EAA4B,CAC9BC,kBDH0B,eACpBC,OAAOC,aACH,IAAIC,MAAM,mFCEhBC,GAEAF,OAAOG,iBAAiB,WAAY,kBACzB,6CAAaC,2BAAAA,qBACa,mBAAlBA,EAAW,GAAmB,OAAOA,EAAW,OAEvDC,EAAQD,EAAW,GACnBE,EAAQ,EACRC,GAAgB,EAGS,iBAAlBH,EAAW,KACdA,EAAW,GAAGI,eAAe,WAC7BH,EAAQD,EAAW,GAAGC,OAGtBD,EAAW,GAAGI,eAAe,WAC7BF,EAAQF,EAAW,GAAGE,OAGtBF,EAAW,GAAGI,eAAe,mBAC7BD,EAAgBH,EAAW,GAAGG,oBAIlCE,EAAO,eACDC,GAAOC,EAAKH,eAAe,qBAAsBG,EAAKC,iBAE5DC,WAAW,WACFF,EAAKG,mBACVJ,GAAQN,EAAW,GAAGW,KAAKJ,GAC3BJ,EAAgBI,EAAKG,mBAAqBE,sBAAsBL,EAAKG,oBACtET,SAGFS,iBAAmBL,EAExBI,WAAW,WACFF,EAAKG,mBAEVP,EAAgBI,EAAKG,mBAAqBE,sBAAsBL,EAAKG,oBACtER,QAEEW,OAAO,mBAAoB,SAAAP,GACxBA,GACAC,EAAKG,iBAAmBL,EAExBF,EAAgBI,EAAKG,mBAAqBE,sBAAsBL,EAAKG,oBAErEI,aAAaP,EAAKG,kBAElBH,EAAKG,iBAAmB,aAQ1CK,EAASpB,OAAOqB,oBAAuB,SAACD,UAAWA,YAEzDpB,OAAOqB,mBAAqB,SAAUC,GAClCxB,EAA0BC,QAE1BqB,EAAOE"}